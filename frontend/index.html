<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document AI System | Dashboard</title>
    <meta name="description" content="Document AI Dashboard - Extract, View Results, Analyze Invoice Processing">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="animated-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
    </div>

    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">
                <span class="logo-text">Document<span class="highlight">AI</span></span>
            </div>
            <div class="nav-links">
                <a href="#extract" class="nav-link active" data-section="extract" onclick="showSection('extract')">
                    <span class="nav-icon">üìÑ</span> Extract
                </a>
                <a href="#results" class="nav-link" data-section="results" onclick="showSection('results')">
                    <span class="nav-icon">üìã</span> Results
                </a>
                <a href="#analytics" class="nav-link" data-section="analytics" onclick="showSection('analytics')">
                    <span class="nav-icon">üìä</span> Analytics
                </a>
            </div>
            <div class="user-section" id="userSection">
                <span class="user-name" id="userName">Guest</span>
                <button class="btn btn-small" id="authBtn" onclick="handleAuthClick()">Sign In</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <!-- EXTRACT SECTION -->
        <section class="dashboard-section active" id="extract">
            <div class="section-header">
                <div class="header-content">
                    <span class="section-badge">Step 1</span>
                    <h1>Extract <span class="gradient-text">Invoice Fields</span></h1>
                    <p>Upload your invoice and let our AI extract dealer name, model, cost, signatures & stamps</p>
                </div>
            </div>

            <div class="upload-container">
                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">üìÑ</div>
                    <h3>Drop your invoice here</h3>
                    <p>or click to browse ‚Ä¢ PDF, PNG, JPG, TIFF</p>
                    <input type="file" id="fileInput" accept=".pdf,.png,.jpg,.jpeg,.tiff,.bmp" hidden>
                </div>
                <div class="preview-area hidden" id="previewArea">
                    <img id="previewImage" src="" alt="Preview">
                    <span id="fileName"></span>
                    <button class="btn-remove" id="removeFile">‚úï</button>
                </div>
                <div class="extract-options">
                    <label class="toggle-option">
                        <input type="checkbox" id="useAgentic" checked>
                        <span>ü§ñ Use Agentic AI (Recommended)</span>
                    </label>
                </div>
                <button class="btn btn-primary" id="extractBtn" disabled>
                    <span class="btn-text">Extract Fields</span>
                    <span class="btn-arrow">‚Üí</span>
                </button>
            </div>

            <!-- Quick Guide -->
            <div class="quick-guide">
                <h3>How it works</h3>
                <div class="guide-steps">
                    <div class="guide-step">
                        <span class="step-num">1</span>
                        <div class="step-content">
                            <h4>Upload</h4>
                            <p>Drop an invoice file (PDF or image)</p>
                        </div>
                    </div>
                    <div class="guide-step">
                        <span class="step-num">2</span>
                        <div class="step-content">
                            <h4>Process</h4>
                            <p>AI agents extract all fields</p>
                        </div>
                    </div>
                    <div class="guide-step">
                        <span class="step-num">3</span>
                        <div class="step-content">
                            <h4>Review</h4>
                            <p>View results & export data</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- RESULTS SECTION -->
        <section class="dashboard-section hidden" id="results">
            <div class="section-header">
                <div class="header-content">
                    <span class="section-badge">Step 2</span>
                    <h1>Extraction <span class="gradient-text">Results</span></h1>
                    <p>Review extracted fields, edit if needed, and export your data</p>
                </div>
            </div>

            <div class="results-container" id="resultsContainer">
                <!-- Empty State -->
                <div class="empty-state" id="emptyResults">
                    <span class="empty-icon">üìã</span>
                    <h3>No Results Yet</h3>
                    <p>Upload and extract a document to see results here</p>
                    <button class="btn btn-secondary" onclick="showSection('extract')">Go to Extract ‚Üí</button>
                </div>

                <!-- Results Content (Hidden initially) -->
                <div class="results-content hidden" id="resultsContent">
                    <div class="results-header">
                        <div class="results-meta">
                            <span class="confidence-badge" id="overallConfidence">--% Confidence</span>
                            <span class="processing-time" id="processingTime">-- steps</span>
                        </div>
                        <div class="results-actions">
                            <button class="btn btn-secondary" id="exportJson">üì• Export JSON</button>
                            <button class="btn btn-secondary" id="viewAnnotated">üñºÔ∏è View Annotated</button>
                        </div>
                    </div>

                    <div class="results-grid" id="resultsGrid"></div>

                    <div class="ai-explanation" id="aiExplanation"></div>
                </div>
            </div>
        </section>

        <!-- ANALYTICS SECTION -->
        <section class="dashboard-section hidden" id="analytics">
            <div class="section-header">
                <div class="header-content">
                    <span class="section-badge">Insights</span>
                    <h1>Processing <span class="gradient-text">Analytics</span></h1>
                    <p>Track your extraction performance and history</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìÑ</div>
                    <div class="stat-value" id="totalProcessed">0</div>
                    <div class="stat-label">Documents Processed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-value" id="avgTime">0s</div>
                    <div class="stat-label">Avg Processing Time</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value" id="avgConfidence">0%</div>
                    <div class="stat-label">Avg Confidence</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="successRate">95%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
            </div>

            <!-- Field Accuracy Chart -->
            <div class="chart-container">
                <h3>üìà Field Extraction Accuracy</h3>
                <div class="accuracy-bars" id="accuracyBars">
                    <div class="accuracy-bar-item">
                        <span class="bar-label">Dealer Name</span>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: 92%" data-field="dealer_name"></div>
                        </div>
                        <span class="bar-value">92%</span>
                    </div>
                    <div class="accuracy-bar-item">
                        <span class="bar-label">Model Name</span>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: 88%" data-field="model_name"></div>
                        </div>
                        <span class="bar-value">88%</span>
                    </div>
                    <div class="accuracy-bar-item">
                        <span class="bar-label">Horse Power</span>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: 85%" data-field="horse_power"></div>
                        </div>
                        <span class="bar-value">85%</span>
                    </div>
                    <div class="accuracy-bar-item">
                        <span class="bar-label">Asset Cost</span>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: 90%" data-field="asset_cost"></div>
                        </div>
                        <span class="bar-value">90%</span>
                    </div>
                    <div class="accuracy-bar-item">
                        <span class="bar-label">Signature</span>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: 82%" data-field="dealer_signature"></div>
                        </div>
                        <span class="bar-value">82%</span>
                    </div>
                    <div class="accuracy-bar-item">
                        <span class="bar-label">Stamp</span>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: 78%" data-field="dealer_stamp"></div>
                        </div>
                        <span class="bar-value">78%</span>
                    </div>
                </div>
            </div>

            <!-- Extraction History -->
            <div class="history-container">
                <h3>üìú Recent Extractions</h3>
                <div class="history-list" id="historyList">
                    <div class="empty-history">
                        <span class="empty-icon">üìÑ</span>
                        <p>No extraction history yet. Upload a document to get started!</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Edit Modal -->
    <div class="modal hidden" id="editModal">
        <div class="modal-content">
            <h3>‚úèÔ∏è Correct Field Value</h3>
            <label id="editFieldLabel">Field</label>
            <input type="text" id="editFieldValue" placeholder="Enter correct value">
            <div class="modal-actions">
                <button class="btn" id="cancelEdit">Cancel</button>
                <button class="btn btn-primary" id="submitEdit">Submit Correction</button>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>

</html>